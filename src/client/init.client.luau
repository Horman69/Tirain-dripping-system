--[[
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ĞšĞ›Ğ˜Ğ•ĞĞ¢Ğ¡ĞšĞĞ¯ Ğ§ĞĞ¡Ğ¢Ğ¬ Ğ˜Ğ“Ğ Ğ«-ĞšĞĞŸĞĞ›ĞšĞ˜
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    Ğ­Ñ‚Ğ¾Ñ‚ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚:
    â€¢ ĞšĞ»Ğ¸ĞºĞ¸ Ğ¼Ñ‹ÑˆĞ¸ Ğ¿Ğ¾ terrain
    â€¢ ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºÑƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€ Ñ‡ĞµÑ€ĞµĞ· RemoteEvents
    â€¢ ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² ĞºĞ¾Ğ¿Ğ°Ğ½Ğ¸Ñ
    â€¢ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ (Ğ² Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¼)
    
    ĞĞ²Ñ‚Ğ¾Ñ€: Rus_ik000
    Ğ”Ğ°Ñ‚Ğ°: 2025
--]]

-- ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Roblox
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

print("ğŸ–±ï¸ Ğ—Ğ°Ğ¿ÑƒÑĞº ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¾Ğ¹ Ñ‡Ğ°ÑÑ‚Ğ¸ Ğ¸Ğ³Ñ€Ñ‹-ĞºĞ¾Ğ¿Ğ°Ğ»ĞºĞ¸...")

-- ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
local localPlayer = Players.LocalPlayer

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Ğ˜ĞœĞŸĞĞ Ğ¢ ĞœĞĞ”Ğ£Ğ›Ğ•Ğ™
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Ğ–Ğ´ĞµĞ¼ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹
local RemoteEvents = require(ReplicatedStorage:WaitForChild("Shared"):WaitForChild("RemoteEvents"))
local MasterConfig = require(ReplicatedStorage:WaitForChild("Shared"):WaitForChild("MasterConfig"))

-- Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹
local DepthTracker = {}
local screenGui = nil
local depthLabel = nil
local biomeLabel = nil

function DepthTracker.initialize()
    print("DepthTracker: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹...")
    
    -- Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ GUI
    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "DepthTracker"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = localPlayer:WaitForChild("PlayerGui")
    
    -- Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ Ñ„Ñ€ĞµĞ¹Ğ¼
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 250, 0, 80)
    frame.Position = UDim2.new(0, 10, 0, 10)
    frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    frame.BackgroundTransparency = 0.3
    frame.BorderSizePixel = 2
    frame.BorderColor3 = Color3.fromRGB(255, 255, 255)
    frame.Parent = screenGui
    
    -- Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0.3, 0)
    title.BackgroundTransparency = 1
    title.Text = "ğŸƒâ€â™‚ï¸ Ğ“Ğ›Ğ£Ğ‘Ğ˜ĞĞ"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextScaled = true
    title.Font = Enum.Font.SourceSansBold
    title.Parent = frame
    
    -- Ğ›ĞµĞ¹Ğ±Ğ» Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹
    depthLabel = Instance.new("TextLabel")
    depthLabel.Size = UDim2.new(1, 0, 0.35, 0)
    depthLabel.Position = UDim2.new(0, 0, 0.3, 0)
    depthLabel.BackgroundTransparency = 1
    depthLabel.Text = "Y: 0 (ĞŸĞ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ÑŒ)"
    depthLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    depthLabel.TextScaled = true
    depthLabel.Font = Enum.Font.SourceSans
    depthLabel.Parent = frame
    
    -- Ğ›ĞµĞ¹Ğ±Ğ» Ğ±Ğ¸Ğ¾Ğ¼Ğ°
    biomeLabel = Instance.new("TextLabel")
    biomeLabel.Size = UDim2.new(1, 0, 0.35, 0)
    biomeLabel.Position = UDim2.new(0, 0, 0.65, 0)
    biomeLabel.BackgroundTransparency = 1
    biomeLabel.Text = "ğŸŒ Ğ‘Ğ¸Ğ¾Ğ¼: ĞŸĞ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ÑŒ"
    biomeLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    biomeLabel.TextScaled = true
    biomeLabel.Font = Enum.Font.SourceSans
    biomeLabel.Parent = frame
    
    -- Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 0.1 ÑĞµĞºÑƒĞ½Ğ´Ñ‹
    game:GetService("RunService").Heartbeat:Connect(function()
        if localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local y = localPlayer.Character.HumanoidRootPart.Position.Y
            
            -- ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ñ‚ĞµĞºÑÑ‚ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹ Ğ¸ Ğ±Ğ¸Ğ¾Ğ¼Ğ°
            if y > 0 then
                depthLabel.Text = string.format("Y: %.1f (ĞŸĞ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ÑŒ)", y)
                depthLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
                biomeLabel.Text = "ğŸŒ Ğ‘Ğ¸Ğ¾Ğ¼: ĞŸĞ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ÑŒ"
            else
                local depth = math.abs(y)
                depthLabel.Text = string.format("Y: %.1f (Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ° %.1f)", y, depth)
                
                if depth < 30 then
                    depthLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
                elseif depth < 100 then
                    depthLabel.TextColor3 = Color3.fromRGB(255, 165, 0)
                else
                    depthLabel.TextColor3 = Color3.fromRGB(255, 0, 0)
                end
                
                local layerIndex = MasterConfig.getLayerIndex(y)
                if layerIndex > 0 then
                    biomeLabel.Text = "ğŸŒ Ğ‘Ğ¸Ğ¾Ğ¼: ĞŸĞ¾Ğ´Ğ·ĞµĞ¼Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ " .. layerIndex
                else
                    biomeLabel.Text = "ğŸŒ Ğ‘Ğ¸Ğ¾Ğ¼: ĞŸĞ¾Ğ²ĞµÑ€Ñ…Ğ½Ğ¾ÑÑ‚ÑŒ"
                end
            end
        end
    end)
    
    print("âœ… DepthTracker Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½")
end

print("âœ… ĞšĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ñ‹")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ ĞšĞ›Ğ˜ĞšĞĞ’ ĞœĞ«Ğ¨Ğ˜
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ mouse Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
local mouse = localPlayer:GetMouse()

-- ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ´Ğ»Ñ ĞºĞ¾Ğ¿Ğ°Ğ½Ğ¸Ñ
local digEvent = RemoteEvents.getDigTerrainEvent()
local resultEvent = RemoteEvents.getDigResultEvent()

--[[
    ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ»Ğ¸Ğº Ğ¼Ñ‹ÑˆĞ¸ Ğ¸Ğ³Ñ€Ğ¾ĞºĞ°
--]]
local function onMouseClick()
    -- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‡Ñ‚Ğ¾ Ñƒ Ğ½Ğ°Ñ ĞµÑÑ‚ÑŒ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ°Ñ Ñ†ĞµĞ»ÑŒ
    if not mouse.Hit then
        return
    end
    
    local hitPosition = mouse.Hit.Position
    local target = mouse.Target
    
    -- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‡Ñ‚Ğ¾ ĞºĞ»Ğ¸Ğº Ğ±Ñ‹Ğ» Ğ¿Ğ¾ terrain
    if target and target == Workspace.Terrain then
        print("ğŸ–±ï¸ ĞšĞ»Ğ¸Ğº Ğ¿Ğ¾ terrain Ğ² Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸: " .. tostring(hitPosition))
        
        -- ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ½Ğ° ĞºĞ¾Ğ¿Ğ°Ğ½Ğ¸Ğµ ÑĞµÑ€Ğ²ĞµÑ€Ñƒ
        digEvent:FireServer(hitPosition)
    else
        print("ğŸ–±ï¸ ĞšĞ»Ğ¸Ğº Ğ½Ğµ Ğ¿Ğ¾ terrain")
    end
end

-- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ĞºĞ»Ğ¸ĞºĞ°
mouse.Button1Down:Connect(onMouseClick)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ĞĞ‘Ğ ĞĞ‘ĞĞ¢ĞšĞ Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢ĞĞ’ ĞšĞĞŸĞĞĞ˜Ğ¯
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--[[
    ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ ĞºĞ¾Ğ¿Ğ°Ğ½Ğ¸Ñ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ°
--]]
resultEvent.OnClientEvent:Connect(function(resultData)
    if resultData and resultData.success then
        print("âœ… ĞšĞ¾Ğ¿Ğ°Ğ½Ğ¸Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾! ĞŸĞ¾Ğ·Ğ¸Ñ†Ğ¸Ñ: " .. tostring(resultData.position))
    else
        print("âŒ ĞšĞ¾Ğ¿Ğ°Ğ½Ğ¸Ğµ Ğ½Ğµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ")
    end
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼ ĞºÑƒÑ€ÑĞ¾Ñ€ Ğ´Ğ»Ñ Ğ»ÑƒÑ‡ÑˆĞµĞ³Ğ¾ UX
mouse.Icon = "rbxasset://textures/ArrowCursor.png"

-- Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹
DepthTracker.initialize()

-- Ğ¡Ğ¾Ğ¾Ğ±Ñ‰Ğ°ĞµĞ¼ Ğ¾ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
print("ğŸ® ĞšĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ°!")
print("ğŸ“ ĞšĞ»Ğ¸ĞºĞ°Ğ¹Ñ‚Ğµ Ğ¿Ğ¾ terrain Ğ´Ğ»Ñ ĞºĞ¾Ğ¿Ğ°Ğ½Ğ¸Ñ ÑĞ¼")
print("ğŸ“Š Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ñ‹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ°")